(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8175],{27660:(e,t,s)=>{Promise.resolve().then(s.bind(s,5970))},40367:(e,t,s)=>{"use strict";s.d(t,{T:()=>A});var r=s(95155);s(12115);var n=s(64665),i=s(42479),l=s(9552),a=s(30562),o=s(2241),c=s(10979),d=s(6020),u=s(7345),h=s(64667),x=s(16917);let g={display:"flex",flexDirection:"column",alignItems:"center",minHeight:"fit-content",backgroundColor:"#85c9e9",padding:20},j={maxWidth:300,width:"75%",maxHeight:300,height:"75%",aspectRatio:"1/1"},m={maxWidth:300},p={fontSize:10,color:"#666666"},v={fontSize:20,paddingBottom:5,color:"#666666"},f={display:"inline-flex",fontSize:13,color:"#666666",lineHeight:1.5},y={fontSize:"1.2rem",fontWeight:"400",marginRight:"0.5rem"},A=e=>{let t=e=>e<10?"0".concat(e):e.toString();return(0,r.jsxs)(n.A,{style:m,children:[(0,r.jsx)(l.A,{style:g,children:(0,r.jsx)(a.A,{alt:"Person",style:j,src:e.photo})}),(0,r.jsx)(o.A,{}),(0,r.jsxs)(i.A,{children:[(0,r.jsx)("div",{style:v,children:e.photo?e.name:"[ Upload Photo ]"}),(0,r.jsx)("div",{style:p,children:e.id}),(0,r.jsxs)(c.A,{direction:"row",justifyContent:"flex-start",spacing:1,paddingTop:1,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{height:"auto",minWidth:75,width:"100%"},children:(0,r.jsx)(d.Ay,{size:75,style:{height:"auto",maxWidth:"100"},value:e.id,viewBox:"0 0 100 100"})}),(0,r.jsx)("div",{style:p,children:(()=>{let e=new Date,s=e.getFullYear().toString(),r=t(e.getMonth()+1),n=t(e.getDate()),i=t(e.getHours()),l=t(e.getMinutes()),a=t(e.getSeconds());return"".concat(s).concat(r).concat(n).concat(i).concat(l).concat(a)})()})]}),(0,r.jsx)("div",{children:(0,r.jsxs)(c.A,{children:[(0,r.jsxs)("div",{style:f,children:[(0,r.jsx)(x.A,{style:y})," ",e.profileType]}),(0,r.jsxs)("div",{style:f,children:[(0,r.jsx)(h.A,{style:y})," ",0===e.entryYear?"Present":e.entryYear," - ",0===e.exitYear?"Present":e.exitYear]}),(0,r.jsxs)("div",{style:f,children:[(0,r.jsx)(u.A,{style:y}),e.primarySchoolName,e.secondarySchoolNames?", "+e.secondarySchoolNames:""]})]})})]})]})]})}},5970:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var r=s(95155),n=s(66437),i=s(23686),l=s(2014),a=s(12115),o=s(59620),c=s(9561),d=s(22678),u=s(96821),h=s(29481),x=s(60615),g=s(69393),j=s(26603),m=s(2241),p=s(1396),v=s(78562),f=s(6403),y=s(73229),A=s(56847),S=s(57061),b=s(40367),C=s(79845);let w={width:"auto",marginTop:"10px"},I=()=>{let[e,t]=a.useState(""),[s,n]=a.useState(""),[i,l]=a.useState(""),[c,d]=a.useState(!0),[u,h]=a.useState(""),[x,g]=a.useState({}),I=()=>{s&&new A.BrowserMultiFormatReader().decodeFromImageUrl(s).then(e=>{l(""),console.log(e);let t=e.getText();t&&S.Dr.IsGuid(t)?(console.log(t),h(t)):l("Invalid QR Code")}).catch(()=>{l("Unable to detect QR Code")})},R=()=>{l(""),d(!0),g({})};return a.useEffect(()=>{u&&S.Dr.IsGuid(u)&&C.GX.GetProfileById(u).then(e=>{g(e.data.result),d(!1),l("")}).catch(e=>{console.log(e)})},[u]),(0,r.jsxs)(r.Fragment,{children:[c&&(0,r.jsxs)(o._,{children:[(0,r.jsxs)(v.A,{component:"form",sx:{p:"2px 4px",display:"flex",alignItems:"center",width:"100%",maxWidth:"300px"},children:[(0,r.jsx)(f.Ay,{sx:{ml:1,flex:1},placeholder:"Select QR Image",inputProps:{"aria-label":"Select QR Image"},value:e}),(0,r.jsx)("input",{accept:"image/*",hidden:!0,multiple:!1,id:"qr-button-file",type:"file",onChange:e=>{var s;l("");let r=null===(s=e.target.files)||void 0===s?void 0:s[0],i=URL.createObjectURL(r);r&&(t(r.name),n(i))}}),(0,r.jsx)("label",{htmlFor:"qr-button-file",children:(0,r.jsx)(j.A,{component:"span",sx:{p:"10px"},children:(0,r.jsx)(y.A,{})})}),(0,r.jsx)(m.A,{sx:{height:28,m:.5},orientation:"vertical"}),(0,r.jsx)(j.A,{onClick:()=>{I(),I()},children:"Verify"})]}),(0,r.jsx)("div",{children:i&&(0,r.jsx)(p.A,{style:w,severity:"error",children:i})})]}),x.id&&(0,r.jsxs)(o._,{children:[(0,r.jsx)(b.T,{...x}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(j.A,{variant:"contained",onClick:()=>{R()},children:"Reset"})]})]})},R={width:"auto",marginTop:"10px"},P=()=>{let[e,t]=a.useState({}),[s,n]=a.useState(!0),[i,l]=a.useState(""),d=(0,a.useRef)(null),u=(0,a.useRef)(null),h=e=>{e&&S.Dr.IsGuid(e)?C.GX.GetProfileById(e).then(e=>{t(e.data.result),n(!1),l("")}).catch(e=>{console.log(e)}):t({})};return(0,a.useEffect)(()=>{if(!s)return;let e=new A.BrowserMultiFormatReader;return u.current=e,e.listVideoInputDevices().then(t=>{if(t.length>0){var s;let r=(null===(s=t.find(e=>e.label.toLowerCase().includes("back")||e.label.toLowerCase().includes("rear")))||void 0===s?void 0:s.deviceId)||t[0].deviceId;e.decodeFromVideoDevice(r,d.current,(t,s)=>{t&&(h(t.getText()),e.reset())})}else console.error("No video input devices found")}).catch(e=>console.error(e)),()=>{e.reset()}},[s]),(0,r.jsxs)(r.Fragment,{children:[s&&(0,r.jsxs)(o._,{children:[(0,r.jsx)(c.A,{variant:"h6",component:"div",align:"left",children:"Scan Alumni Badge QR Code"}),(0,r.jsx)("video",{ref:d,style:{maxHeight:"300px"}}),(0,r.jsx)("div",{children:i&&(0,r.jsx)(p.A,{style:R,severity:"error",children:i})})]}),e.id&&(0,r.jsxs)(o._,{children:[(0,r.jsx)(b.T,{...e}),(0,r.jsx)("br",{}),(0,r.jsx)(j.A,{variant:"contained",onClick:()=>{console.log("Resetting scanner"),t({}),n(!0),l("")},children:"Reset"})]})]})},D=()=>{let[e,t]=a.useState(!0),[s,n]=a.useState("scan");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(o._,{children:[(0,r.jsx)(c.A,{variant:"h6",component:"h2",gutterBottom:!0,children:"Verify Alumni ID using QR Code"}),(0,r.jsxs)(d.A,{children:[(0,r.jsx)(u.A,{id:"radio",children:"Verification mode:"}),(0,r.jsxs)(h.A,{row:!0,"aria-labelledby":"radio",name:"radio",value:s,onChange:e=>{n(e.target.value),"scan"===e.target.value?t(!0):t(!1)},children:[(0,r.jsx)(x.A,{value:"scan",control:(0,r.jsx)(g.A,{}),label:"Scan QR"}),(0,r.jsx)(x.A,{value:"image",control:(0,r.jsx)(g.A,{}),label:"QR Screenshot"})]})]})]}),e?(0,r.jsx)(P,{}):(0,r.jsx)(I,{})]})},T=()=>(0,r.jsxs)(n.F,{children:[(0,r.jsx)(l.Y,{tabs:i.jW}),(0,r.jsx)(D,{})]})},24309:(e,t,s)=>{"use strict";s.d(t,{a:()=>w});var r=s(95155),n=s(12115),i=s(10979),l=s(9561),a=s(70152),o=s(26603),c=s(1396),d=s(44522),u=s(96854),h=s(59620),x=s(87550),g=s(36645),j=s(92437),m=s(76046),p=s(57061),v=s(73365),f=s(39161),y=s(23686),A=s(79845),S=s(5565);let b={alignSelf:"center"},C={minHeight:"50px"},w=e=>{let{setAuthData:t}=(0,n.useContext)(f.c),[s,w]=(0,n.useState)(""),[I,R]=(0,n.useState)(""),[P,D]=(0,n.useState)(!1),[T,k]=(0,n.useState)(!1),[E,F]=(0,n.useState)(""),[O,_]=(0,n.useState)(""),[U,B]=(0,n.useState)(!1),[L,z]=(0,n.useState)(!1),[G,N]=(0,n.useState)(!1),Q=e.pathname||y.ts.Root,Y=(0,m.useRouter)(),M=()=>{k(!1),D(!1)},W=()=>{M(),N(!0),A.p$.CreateToken({email:s,otp:I}).then(e=>{let s=e.data,r={name:s.result.name,email:s.result.resource};(0,v.uj)(s.result),t(r),N(!1),D(!0),F("Login successful."),s.result.roles.includes(p.YK.InvitedUser)?Y.push("/profile"):Y.push(Q)}).catch(e=>{N(!1),k(!0),403===e.response.status?_("Access denied. Please contact support."):400===e.response.status?_("Invalid email or otp."):404===e.response.status?_("User not found. Please Register first."):_("An unexpected error occurred. Please try again.")})};return(0,r.jsxs)(i.A,{direction:"column",alignItems:"center",justifyContent:"center",height:"80vh",children:[(0,r.jsx)(h._,{children:(0,r.jsx)("form",{onSubmit:e=>{e.preventDefault(),W()},children:(0,r.jsxs)(i.A,{direction:"column",alignContent:"center",justifyContent:"center",spacing:2,margin:2,children:[(0,r.jsx)(S.default,{src:j.v.logo,alt:"Logo",width:100,height:100,style:b}),(0,r.jsx)(l.A,{variant:"h6",style:b,children:"Login to Portal"}),(0,r.jsx)(a.A,{id:"user-email",label:"Email",variant:"outlined",value:s,required:!0,onChange:e=>{M(),w(e.target.value),p.Dr.IsEmail(e.target.value)?B(!0):(B(!1),z(!1))},error:null!==s&&""!==s&&!p.Dr.IsEmail(s)}),(0,r.jsx)(a.A,{id:"otp",label:"OTP",variant:"outlined",value:I,required:!0,onChange:e=>{M(),R(e.target.value),6===e.target.value.length?z(!0):z(!1)},error:null!==I&&""!==I&&6!==I.length&&!p.Dr.IsNumber(I)}),(0,r.jsxs)(i.A,{direction:"row",justifyContent:"center",spacing:2,children:[(0,r.jsx)(o.A,{variant:"outlined",endIcon:(0,r.jsx)(g.A,{}),disabled:!U,onClick:()=>{M(),N(!0),A.p$.CreateOtp({email:s}).then(()=>{N(!1),D(!0),F("OTP sent successfully.")}).catch(e=>{N(!1),k(!0),400===e.response.status?_("Invalid email."):403===e.response.status?_("Access denied. Please contact support."):404===e.response.status?_("User not found. Please Register first."):_("An unexpected error occurred. Please try again.")})},children:"Get OTP"}),(0,r.jsx)(o.A,{type:"submit",variant:"contained",endIcon:(0,r.jsx)(x.A,{}),disabled:!L,children:"Login"})]})]})})}),(0,r.jsxs)("div",{style:C,children:[T&&(0,r.jsx)(c.A,{severity:"error",children:O}),P&&(0,r.jsx)(c.A,{severity:"success",children:E}),!T&&!P&&(0,r.jsx)(c.A,{severity:"info",children:"Enter your credential to login."})]}),(0,r.jsx)(d.A,{sx:{color:"#fff",zIndex:e=>e.zIndex.drawer+1},open:G,onClick:()=>{N(!1)},children:(0,r.jsx)(u.A,{color:"inherit"})})]})}},2014:(e,t,s)=>{"use strict";s.d(t,{Y:()=>c});var r=s(95155),n=s(12115),i=s(68998),l=s(88648),a=s(79987),o=s(76046);let c=e=>{let{tabs:t}=e,[s,c]=n.useState(0),d=(0,o.useRouter)(),u=(0,o.usePathname)();n.useEffect(()=>{c(t.findIndex(e=>e.path===u))},[u]);let h=n.useCallback((e,s)=>{c(s),d.push(t[s].path.split("?")[0].split("#")[0])},[]),x=n.useMemo(()=>t.map((e,t)=>(0,r.jsx)(a.A,{label:e.label},t)),[t]);return(0,r.jsx)(i.A,{sx:{width:"100%",borderBottom:1,borderColor:"divider",marginBottom:1},children:(0,r.jsx)(l.A,{value:s,onChange:h,centered:!0,children:x})})}},66437:(e,t,s)=>{"use strict";s.d(t,{F:()=>o});var r=s(95155),n=s(12115),i=s(76046),l=s(24309),a=s(42336);let o=e=>{let t=(0,a.A)(),[s,o]=n.useState(!1),c=(0,i.usePathname)();return(0,n.useEffect)(()=>{window.scrollTo(0,0),o(!0)},[c]),(0,r.jsx)(r.Fragment,{children:s&&(t?e.children:(0,r.jsx)(l.a,{pathname:c}))})}},42336:(e,t,s)=>{"use strict";s.d(t,{A:()=>c,h:()=>o});var r=s(95155),n=s(12115),i=s(39161),l=s(4753),a=s(73365);let o=e=>{let{children:t}=e,[s,o]=(0,n.useState)({}),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{d((0,a.AJ)())},[]),(0,n.useEffect)(()=>{(0,l.Jv)(s)||d(!0)},[s]),(0,n.useEffect)(()=>{c||o({})},[c]);let u=(0,n.useMemo)(()=>({isAuthenticated:c,setIsAuthenticated:d,authData:s,setAuthData:o}),[c,d,s,o]);return(0,r.jsx)(i.c.Provider,{value:u,children:t})},c=()=>{let{isAuthenticated:e}=(0,n.useContext)(i.c);return e}},4753:(e,t,s)=>{"use strict";s.d(t,{Jv:()=>r,Ok:()=>o,SP:()=>a,eR:()=>n,rU:()=>l,zu:()=>i});let r=e=>"object"!=typeof e||null===e||!(Object.keys(e).length>0),n=e=>{let t=new Date(e),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).format(t),r=s.indexOf(",")+2;return"".concat(s.substring(0,r)," ").concat(s.substring(r).toLowerCase())},i=e=>n(new Date(1e3*e).toISOString()),l=e=>Math.floor(e.getTime()/1e3),a=e=>l(new Date(e)),o=e=>{let t=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}).format(e),s=t.indexOf(",")+2;return"".concat(t.substring(0,s)," ").concat(t.substring(s).toLowerCase())}}},e=>{var t=t=>e(e.s=t);e.O(0,[4758,9427,6544,6402,2627,6165,2824,6020,319,1209,1774,5937,8441,1517,7358],()=>t(27660)),_N_E=e.O()}]);